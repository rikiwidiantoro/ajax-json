<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan AJAX Javascript</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Latihan ajax vanila javascript (javascript murni)</h1>
    <br>
    <p></p>
    <br>
    <li>Nama : <span></span></li>


    <script>
        function load_ajax() {
            // memanggil object ajax yg tertanam di browser dan di taruh dalam suatu variabel
            const ajax = new XMLHttpRequest();

            /* memanggil metode open dari ajax
                ada 3 parameter :
                1. GET >> mengambil data || POST >> untuk mentransfer
                2. url atau sumber file-nya
                3. true = asynchronous || false = synchronous
            */
            ajax.open('GET', 'src/data.json', true);

            // uji terlebih dahulu
            ajax.onreadystatechange = function() {
                // apakah berhasil atau tidak cek dengan if readyState dan status nya
                if(this.readyState === 4 && this.status === 200) {
                    let pesan = document.querySelector('p');
                    let li = document.querySelector('span');
                    pesan.innerText = 'ajax telah berhasil!';
                    
                    // menampilkan isi data dari json dengan responseText
                    console.log(this.responseText);

                    // mengubah json ke object dengan JSON.parse()
                    let data = JSON.parse(this.responseText);
                    console.log(data);
                    li.innerText = data.nama;
                }
            }

            // mengirimkan sebuah request
            ajax.send();
        }

        load_ajax();
    </script>
</body>
</html>